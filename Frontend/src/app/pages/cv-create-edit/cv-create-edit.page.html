<div class="cv-builder-container">
  <div class="form-section">
    <h2>{{cvId ? 'Edit CV' : 'Create CV'}}</h2>
    <form (ngSubmit)="onSubmit()">
      <label>Title</label>
      <input [(ngModel)]="cv.title" name="title" placeholder="CV Title">

      <label>Template ID</label>
      <input [(ngModel)]="cv.template_id" name="template_id" placeholder="Template ID">

      <h3>Profile</h3>
      <input [(ngModel)]="cv.profile.headline" name="headline" placeholder="Headline">
      <input [(ngModel)]="cv.profile.phone" name="phone" placeholder="Phone">
      <input [(ngModel)]="cv.profile.address" name="address" placeholder="Address">
      <input [(ngModel)]="cv.profile.birthday" name="birthday" placeholder="Birthday">
      <textarea [(ngModel)]="cv.profile.about_me" name="about_me" placeholder="About Me"></textarea>

      <h3>Skills</h3>
      <div *ngFor="let s of cv.skills; let i=index">
        <input [(ngModel)]="cv.skills[i]" name="skill{{i}}" placeholder="Skill">
        <button type="button" (click)="removeSkill(i)">x</button>
      </div>
      <button type="button" (click)="addSkill()">+ Add Skill</button>

      <h3>Languages</h3>
      <div *ngFor="let l of cv.languages; let i=index">
        <input [(ngModel)]="cv.languages[i]" name="lang{{i}}" placeholder="Language">
        <button type="button" (click)="removeLanguage(i)">x</button>
      </div>
      <button type="button" (click)="addLanguage()">+ Add Language</button>

      <h3>Educations</h3>
      <div *ngFor="let e of cv.educations; let i=index">
        <input [(ngModel)]="cv.educations[i]" name="edu{{i}}" placeholder="Education">
        <button type="button" (click)="removeEducation(i)">x</button>
      </div>
      <button type="button" (click)="addEducation()">+ Add Education</button>

      <h3>Experiences</h3>
      <div *ngFor="let ex of cv.experiences; let i=index">
        <input [(ngModel)]="cv.experiences[i]" name="exp{{i}}" placeholder="Experience">
        <button type="button" (click)="removeExperience(i)">x</button>
      </div>
      <button type="button" (click)="addExperience()">+ Add Experience</button>

      <h3>Projects</h3>
      <div *ngFor="let p of cv.projects; let i=index">
        <input [(ngModel)]="cv.projects[i]" name="proj{{i}}" placeholder="Project">
        <button type="button" (click)="removeProject(i)">x</button>
      </div>
      <button type="button" (click)="addProject()">+ Add Project</button>

      <button type="submit">{{cvId ? 'Update CV' : 'Create CV'}}</button>
    </form>
  </div>

  <div class="preview-section">
    <h2>Preview CV</h2>
    <div class="cv-preview">
      <h1>{{cv.title}}</h1>
      <h3>{{cv.profile.headline}}</h3>
      <p>{{cv.profile.about_me}}</p>

      <h4>Skills</h4>
      <div class="chip" *ngFor="let s of cv.skills">{{s}}</div>

      <h4>Languages</h4>
      <div class="chip green" *ngFor="let l of cv.languages">{{l}}</div>

      <h4>Educations</h4>
      <ul><li *ngFor="let e of cv.educations">{{e}}</li></ul>

      <h4>Experiences</h4>
      <ul><li *ngFor="let ex of cv.experiences">{{ex}}</li></ul>

      <h4>Projects</h4>
      <ul><li *ngFor="let p of cv.projects">{{p}}</li></ul>
    </div>
  </div>
</div>
